{extend name="adminPublic:public"/} {block name="title"}修改节点{/block} {block name="content"}
<div class="mws-panel grid_8">
    <div class="mws-panel-header">
        <span>
            <i class="icon-table"></i>节点列表</span>
    </div>
    <div class="mws-panel-body no-padding">
        <div id="DataTables_Table_1_wrapper" class="dataTables_wrapper" role="grid">
            <div class="dataTables_filter" id="DataTables_Table_1_filter">
                <label>Search:
                    <input aria-controls="DataTables_Table_1" type="text">
                </label>
            </div>
            <div id="table_box">
            <table class="mws-datatable-fn mws-table dataTable" id="DataTables_Table_1" aria-describedby="DataTables_Table_1_info">
                <thead>
                    <tr role="row">
                        <th class="sorting_asc" role="columnheader" tabindex="0" aria-controls="DataTables_Table_1" rowspan="1"
                            colspan="1" style="width: 204.2px;" aria-sort="ascending" aria-label="Rendering engine: activate to sort column descending">节点名称</th>
                        <th class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_1"
                            rowspan="1" colspan="1" style="width: 246.2px;" aria-label="Browser: activate to sort column ascending">节点模块</th>
                        <th class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_1"
                            rowspan="1" colspan="1" style="width: 234.2px;" aria-label="Platform(s): activate to sort column ascending">节点方法</th>
                        <th class="sorting" role="columnheader" tabindex="0" aria-controls="DataTables_Table_1"
                            rowspan="1" colspan="1" style="width: 87.2px;" aria-label="Engine version: activate to sort column ascending">操作</th>
                    </tr>
                </thead>

                <tbody role="alert" aria-live="polite" aria-relevant="all">
                    {foreach name="node" item="vo"}
                    <tr class="odd">
                        <td class="  sorting_1">{$vo['name']}</td>
                        <td class=" ">{$vo['mname']}</td>
                        <td class=" ">{$vo['aname']}</td>
                        <td class=" ">
                            <span class="btn-group">
                                <a href="javascript:;" class="btn btn-danger del" title="{$vo['id']}">
                                    删除
                                </a>
                                <!-- <a href="/node/edit/id/{$vo['id']}" class="btn btn-success">
                                    修改
                                </a> -->
                            </span>
                        </td>
                    </tr>
                    {/foreach}
                </tbody>
            </table>
            </div>
            <div class="dataTables_info" id="DataTables_Table_1_info">

            </div>
            <div class="dataTables_paginate paging_full_numbers" id="DataTables_Table_1_paginate">
                {foreach name="num" item='vo'}
                <span>
                    <a tabindex="0" class="paginate_active " onclick="cpage({$vo})" >{$vo}</a>
                </span>
                {/foreach}
            </div>
        </div>
    </div>
</div>
{/block}
{block name="script"}
<script>
    function cpage(n) {
        $.get('/node/index',{'page':n},function (data) {
            console.log(data);
            $('#table_box').html(data);
        });
    };
</script>

<script>
    $('.del').each(function () {
            $(this).click(function () {
                me = $(this);
                var id = $(this).attr('title');
                $.ajax({
                    url: '/node/del',
                    data: { 'id': id },
                    success: function (data) {
                        if (data) {
                            me.parents('tr').remove();
                            alert('操作成功');
                        } else {
                            alert('删除失败');
                        }
                    }
                })
            })
        });
</script>
{/block}


